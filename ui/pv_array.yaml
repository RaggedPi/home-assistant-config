################################################################
# PV Array #####################################################
################################################################
title: PV System
icon: 'mdi:solar-power'
path: solar
badges: []
cards:
  ##############################
  # Weather Conditions Section #
  ##############################
  - type: entities
    entities:
    #######
    # Sun #
    #######
    - type: "custom:sun-card"
      name: ''

    - type: section
    ######################
    # Today's Conditions #
    ######################
    - type: custom:multiple-entity-row
      entity: sensor.pv_cloud_coverage_0d
      name: Today
      state_header: Cloud Coverage
      secondary_info: last-changed
      entities:
        - entity: sensor.pv_visibility_0d
          name: Visibility

    - type: section
    #########################
    # Tomorrow's Conditions #
    #########################
    - type: custom:multiple-entity-row
      entity: sensor.pv_cloud_coverage_1d
      name: Tomorrow
      state_header: Cloud Coverage
      secondary_info: last-changed
      entities:
        - entity: sensor.pv_visibility_1d
          name: Visibility

  - type: sensor
    entity: sensor.classic_avg_energy_today
    graph: line

  #####################
  # PV Status Section #
  #####################
  - type: entities
    entities:
    ############
    # PV Gauge #
    ############
    - !include cards/pv_gauge.yaml
#    - !include cards/pv_flex.yaml

  - type: entities
    title: Charge Controller
    show_header_toggle: false
    entities:      
    #############
    # Mode data #
    #############
    - !include cards/pv_preview.yaml
    
    - type: section
    ############
    # PV Array #
    ############
    - !include cards/pv_power.yaml

    - type: section
    ################
    # Temperatures #
    ################
    - type: custom:multiple-entity-row
      entity: sensor.classic_battery_temp
      name: Temperatures
      state_header: Battery
      secondary_info: last-changed
      entities:
        - entity: sensor.classic_fet_temp
          name: FET
        - entity: sensor.classic_pcb_temp
          name: PCB

    - type: section
    ################
    # Battery Bank #
    ################
    - type: custom:multiple-entity-row
      entity: sensor.classic_avg_battery_current
      name: 'Battery Bank'
      state_header: Current
      secondary_info: last-changed
      entities:
        - entity: sensor.classic_amphours_today
          name: Amp Hours
        - entity: sensor.classic_avg_battery_voltage
          name: Voltage
        - entity: sensor.classic_nom_battery_voltage
          name: Nominal Voltage
    
    - type: section
    ############
    # Firmware #
    ############
    - type: custom:multiple-entity-row
      entity: sensor.classic_model
      name: Classic
      state_header: Model
      secondary_info: last-changed
      entities:
        - entity: sensor.classic_pcb_revision
          name: PCB Revision
        - entity: sensor.classic_build_date
          name: Revision Date